<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png"><link rel="icon" href="/img/fluid.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="author" content="peter？"><meta name="keywords" content=""><meta name="description" content="结构编码器encoder包含了6个相同的层组成的“stack”，每层两个子层，一个是多头自注意力机制，一个是“simple, positionwise fully connected feed-forward network”简单的、互联的前馈网络。 在每子层的周围使用残差连接、层归一化。“We employ a residual connection around each of the two"><meta property="og:type" content="article"><meta property="og:title" content="Transformer(Attention机制)论文阅读-2"><meta property="og:url" content="http://petertan303.github.io/2023/06/13/Transformer-Attention%E6%9C%BA%E5%88%B6-%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB-2/index.html"><meta property="og:site_name" content="petertan303"><meta property="og:description" content="结构编码器encoder包含了6个相同的层组成的“stack”，每层两个子层，一个是多头自注意力机制，一个是“simple, positionwise fully connected feed-forward network”简单的、互联的前馈网络。 在每子层的周围使用残差连接、层归一化。“We employ a residual connection around each of the two"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://petertan303.github.io/img/QQ%E6%88%AA%E5%9B%BE20230613170233.png"><meta property="og:image" content="http://petertan303.github.io/2023/06/13/Transformer-Attention%E6%9C%BA%E5%88%B6-%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB-2/v2-3c82189a676da40f1ee57c916311ec88_r.png"><meta property="og:image" content="http://petertan303.github.io/img/QQ%E6%88%AA%E5%9B%BE20230614140633.png"><meta property="og:image" content="http://petertan303.github.io/img/QQ%E6%88%AA%E5%9B%BE20230614145448.png"><meta property="og:image" content="http://petertan303.github.io/img/QQ%E6%88%AA%E5%9B%BE20230614150348.png"><meta property="og:image" content="http://petertan303.github.io/img/QQ%E6%88%AA%E5%9B%BE20230614145448.png"><meta property="article:published_time" content="2023-06-13T05:16:37.000Z"><meta property="article:modified_time" content="2023-06-14T11:21:49.785Z"><meta property="article:author" content="peter？"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="http://petertan303.github.io/img/QQ%E6%88%AA%E5%9B%BE20230613170233.png"><title>Transformer(Attention机制)论文阅读-2 - petertan303</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var CONFIG={hostname:"petertan303.github.io",root:"/",version:"1.9.4",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!0,baidu:"6a833fa5fd2900165acbe7570545a8a2",google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:"mV6pM4FkddUR4CfQioaXxMrp-9Nh9j0Va",app_key:"YvR7UmmLPsWePIigEYzEjLuy",server_url:"https://mv6pm4fk.lc-cn-n1-shared.com",path:"window.location.pathname",ignore_local:!0}},search_path:"/local-search.xml"};if(CONFIG.web_analytics.follow_dnt){var dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on"))}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><script async>if(!Fluid.ctx.dnt){var _hmt=_hmt||[];!function(){var t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?6a833fa5fd2900165acbe7570545a8a2";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()}</script><meta name="generator" content="Hexo 6.3.0"></head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>PeterTan303</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> <span>首页</span></a></li><li class="nav-item"><a class="nav-link" href="/archives/"><i class="iconfont icon-archive-fill"></i> <span>归档</span></a></li><li class="nav-item"><a class="nav-link" href="/categories/"><i class="iconfont icon-category-fill"></i> <span>分类</span></a></li><li class="nav-item"><a class="nav-link" href="/tags/"><i class="iconfont icon-tags-fill"></i> <span>标签</span></a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> <span>关于</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/img/default.png) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="Transformer(Attention机制)论文阅读-2"></span></div><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2023-06-13 13:16" pubdate>2023年6月13日 下午</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i>4.6k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i>39 分钟 </span><span id="leancloud-page-views-container" class="post-meta" style="display:none"><i class="iconfont icon-eye" aria-hidden="true"></i> <span id="leancloud-page-views"></span> 次</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 style="display:none">Transformer(Attention机制)论文阅读-2</h1><div class="markdown-body"><h2 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h2><h3 id="编码器encoder"><a href="#编码器encoder" class="headerlink" title="编码器encoder"></a>编码器encoder</h3><p>包含了6个相同的层组成的“stack”，每层两个子层，一个是多头自注意力机制，一个是“simple, positionwise fully connected feed-forward network”简单的、互联的前馈网络。</p><p>在每子层的周围使用残差连接、层归一化。“We employ a residual connection around each of the two sub-layers, followed by layer normalization.”，也就是每层的输出为 LayerNorm(x + Sublayer(x))。</p><p>所有层被标准化为512维的输出。</p><h3 id="解码器decoder"><a href="#解码器decoder" class="headerlink" title="解码器decoder"></a>解码器decoder</h3><p>同样包含了6个相同的层组成的“stack”，但每层三个子层，一个是多头自注意力机制，一个是多头编码器-解码器注意力机制，“performs multi-head attention over the output of the encoder stack”，一个是简单的、互联的前馈网络。</p><p>其中的自注意力层和编码器有所不同，不会关注当前位置后面的位置。</p><p>和编码器相同，在每子层的周围使用残差连接、层归一化。“We employ a residual connection around each of the two sub-layers, followed by layer normalization.”，也就是每层的输出为 LayerNorm(x + Sublayer(x))。所有层被标准化为512维的输出。</p><h2 id="注意力机制"><a href="#注意力机制" class="headerlink" title="注意力机制"></a>注意力机制</h2><p>本质是将查询（query）和一组键值对（a set of key-value pairs，是键和值）映射到输出。</p><p>换言之，这个键和这个值是配对的，查询是额外的。</p><p>输出是值的加权和，权重由查询和对应关键字兼容性函数确定。（weight assigned to each value is computed by a compatibility function of the query with the corresponding key.）</p><p>将三种向量各自组成查询（Q），键（K），值（V），然后三个矩阵变一个Output。</p><p><img src="/img/QQ截图20230613170233.png" srcset="/img/loading.gif" lazyload alt="图一"></p><p>其中，求权重的“Scaled Dot-Product Attention”的公式为：</p><p><img src="v2-3c82189a676da40f1ee57c916311ec88_r.png" srcset="/img/loading.gif" lazyload alt="Scaled Dot-Product Attention"></p><p>即计算QKV三者输出。假设Q和K等长，长度dk，V长度dv，计算过程：</p><ul><li>求QK余弦相似度：求夹角余弦值，相当于判断向量夹角，角度越小越相似。</li><li>余弦相似度除(dk)^(1/2)（长度）</li><li>softmax得到权重，即是attention。</li><li>attention权重和V相乘，每一行就是需要的输出。</li></ul><p>Scaled Dot-Product Attention属于点乘注意力机制，并在一般点乘注意力机制的基础上，加上了scaled。scaled是指对注意力权重进行缩放，以确保数值的稳定性。</p><p>常用注意力机制有additive attention、dot-product (multiplicative) attention，加性注意力和点积注意力。Scaled Dot-Product Attention属于点积注意力，但Scaled Dot-Product Attention 比传统的点积注意力多了一个根号dk的部分。</p><p>加性注意力使用具有单个隐藏层的前馈网络来计算兼容性函数。</p><p>虽然加与乘注意力两者在理论复杂性上相似，但点积注意力在实践中要快得多，而且更节省空间，因为它可以使用高度优化的矩阵乘法代码来实现。</p><p>引入根号dk的原因：弥补点积注意力相对于加法注意力的缺陷：对于较大的dk值，点积的大小会变大，从而将softmax函数推向具有极小梯度的区域。根号dk可以抵消这个影响。</p><h3 id="多头注意力"><a href="#多头注意力" class="headerlink" title="多头注意力"></a>多头注意力</h3><p>从“performing a single attention function with dmodel-dimensional keys, values and queries”</p><p>到“linearly project the queries, keys and values h times with different, learned linear projections to dk, dk and dv dimensions, respectively，On each of these projected versions of queries, keys and values we then perform the attention function in parallel, yielding dv-dimensional output values. These are concatenated and once again projected, resulting in the final values.”</p><p>（projected，含预计和投影的意思。）</p><p>翻译一下就是，本来是单头注意力，只有一个注意力函数。</p><p>而多头注意力是用不同的、通过机器学习学到的线性投影，将查询、键和值（三个向量）分别线性投影到dk、dk和dv维度h次，也就是h个注意力头。然后在查询、键和值的每个投影版本上，我们并行执行注意力函数，生成dv维输出值。这些被连接起来，组成多头，并再次投影，得到最终值。</p><p>多头注意力允许模型联合关注来自不同位置的不同表示子空间的信息。对于一个单一的注意力头而言，做不到，因为单头注意力使用的平均会抑制这种情况。</p><p>“头”指的是某次线性投影得到的注意力。</p><p><img src="/img/QQ截图20230614140633.png" srcset="/img/loading.gif" lazyload alt="图二"></p><p>团队在测试的时候使用了八个头，h=8，QK长度均为64，d(model)则是h与64相乘。</p><p>总计算成本比较低，因为每个头的维数并不高，而且还可以并行计算。</p><h3 id="Transformer中注意力机制的使用"><a href="#Transformer中注意力机制的使用" class="headerlink" title="Transformer中注意力机制的使用"></a>Transformer中注意力机制的使用</h3><h4 id="编码器-解码器注意力"><a href="#编码器-解码器注意力" class="headerlink" title="编码器-解码器注意力"></a>编码器-解码器注意力</h4><p>在解码器中使用。</p><p>查询来自上一个解码器层，键和值来自编码器的输出。</p><p>这种机制模仿了序列到序列模型中的典型编码器-解码器注意力机制，允许解码器中的每一个位置关注输入序列中的所有位置。</p><h4 id="编码器自注意力"><a href="#编码器自注意力" class="headerlink" title="编码器自注意力"></a>编码器自注意力</h4><p>所有的键、值和查询都来自同一个地方，也就是是编码器中前一层的输出。</p><p>这种机制允许编码器中的每个位置关注编码器的前一层中的所有位置。</p><h4 id="解码器自注意力"><a href="#解码器自注意力" class="headerlink" title="解码器自注意力"></a>解码器自注意力</h4><p>基本同编码器，但是解码器只能关注半边的信息，“prevent leftward information flow in the decoder to preserve the auto-regressive property”</p><h2 id="位置前馈网络Position-wise-Feed-Forward-Networks"><a href="#位置前馈网络Position-wise-Feed-Forward-Networks" class="headerlink" title="位置前馈网络Position-wise Feed-Forward Networks"></a>位置前馈网络Position-wise Feed-Forward Networks</h2><p>每层都包含一个全连接神经网络。“applied to each position separately and identically”，分别且相同地应用于每个位置。</p><p>这个网络包含了两个线性变换，一个是relu激活。</p><p>不同层网络结构相同但参数不同。</p><p>这个网络也可以看作是一个卷积核大小为1的两个卷积。实验者设置的输入和输出的维度为dmodel=512，内层的维度为dff=2048。</p><h2 id="Embeddings-and-Softmax"><a href="#Embeddings-and-Softmax" class="headerlink" title="Embeddings and Softmax"></a>Embeddings and Softmax</h2><p>embedding含义为嵌入层，可以把信息选择性保留，缩小矩阵大小（稀疏矩阵）抽象但更容易处理，即降维；也可以升维。</p><p>transformer中的embedding是输入token和输出token转换为维度为dmodel的向量，还使用普通线性变换和softmax函数，将解码器的输出转换为预测的下一个token概率。</p><p>transformer中两个嵌入层和预softmax线性变换之间共享相同的权重矩阵。在embedding层中，将这些权重和根号dmodel相乘。</p><h2 id="位置编码positional-encodings"><a href="#位置编码positional-encodings" class="headerlink" title="位置编码positional encodings"></a>位置编码positional encodings</h2><p>只用注意力机制，不使用卷积和递归，因此需要引入相关位置信息，计算序列中的token。</p><p>每层的复杂度、顺序操作、最大路径长度</p><p><img src="/img/QQ截图20230614145448.png" srcset="/img/loading.gif" lazyload alt="图三"></p><p>n是序列长度，d是表示维度，k是卷积的核大小，r是限制自注意中邻域的大小。</p><p>transformer将位置编码和“编码器和解码器堆栈底部的‘输入embedding’”结合。（指编码器解码器都有多层，这里是加到最底下一层的embedding子层）</p><p>位置编码与embedding具有相同的维度dmodel，因此可以将两者进行直接处理。有多种位置编码可以选择，可以选择让机器学习编码，也可以直接使用固定方式。而本文使用的是不同频率正余弦函数。</p><p><img src="/img/QQ截图20230614150348.png" srcset="/img/loading.gif" lazyload alt="图四"></p><p>输入参数中，pos是位置，i是尺寸。</p><p>可以理解为将每个位置和频域上的冲激相对应起来。之所以选择正余弦函数，是对pos的任何偏移，都可以将函数转化为没有偏移的正余弦函数。</p><h2 id="自注意力机制和递归、卷积对比"><a href="#自注意力机制和递归、卷积对比" class="headerlink" title="自注意力机制和递归、卷积对比"></a>自注意力机制和递归、卷积对比</h2><p>三个方面：</p><h3 id="每层的总计算复杂度"><a href="#每层的总计算复杂度" class="headerlink" title="每层的总计算复杂度"></a>每层的总计算复杂度</h3><h3 id="可以并行化的计算量"><a href="#可以并行化的计算量" class="headerlink" title="可以并行化的计算量"></a>可以并行化的计算量</h3><h3 id="网络中长程依赖项之间的路径长度（path-length-between-long-range-dependencies-in-the-network）"><a href="#网络中长程依赖项之间的路径长度（path-length-between-long-range-dependencies-in-the-network）" class="headerlink" title="网络中长程依赖项之间的路径长度（path length between long-range dependencies in the network）"></a>网络中长程依赖项之间的路径长度（path length between long-range dependencies in the network）</h3><p>网络需要学习长程依赖关系，而影响学习这种依赖性的能力的一个关键因素是前向和后向信号在网络中必须经过的路径的长度，越短就越容易学习。</p><p>研究时统计了由不同层类型组成的网络中任意两个输入和输出位置之间的最大路径长度：</p><p>每层的复杂度、顺序操作、最大路径长度</p><p><img src="/img/QQ截图20230614145448.png" srcset="/img/loading.gif" lazyload alt="图三"></p><p>n是序列长度，d是表示维度，k是卷积的核大小，r是限制自注意中邻域的大小。<br></p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs excel">自关注层通过恒定数量的顺序执行操作连接所有位置，而递归层需要O（<span class="hljs-built_in">n</span>）个顺序操作。就计算复杂性而言，当序列长度<span class="hljs-built_in">n</span>小于表示维度d时，自注意层比递归层更快，这在机器翻译中最先进的模型使用的句子表示中最为常见，例如分词[<span class="hljs-number">38</span>]和字节对[<span class="hljs-number">31</span>]表示。为了提高涉及非常长序列的任务的计算性能，可以将自注意限制为仅考虑输入序列中以相应输出位置为中心的大小为r的邻域。这将使最大路径长度增加到O（<span class="hljs-built_in">n</span>＝r）。我们计划在未来的工作中进一步研究这种方法。<br><br>核宽度k＜<span class="hljs-built_in">n</span>的单个卷积层并不连接所有输入和输出位置对。在连续核的情况下，这样做需要O（<span class="hljs-built_in">n</span>=k）个卷积层的堆栈，或者在扩张卷积的情况下需要O（logk（<span class="hljs-built_in">n</span>））[<span class="hljs-number">18</span>]，从而增加网络中任意两个位置之间最长路径的长度。卷积层通常比递归层贵k倍。然而，可分离卷积[<span class="hljs-number">6</span>]将复杂性显著降低到O（k <span class="hljs-built_in">n</span> d+<span class="hljs-built_in">n</span> <span class="hljs-symbol">d2</span>）。然而，即使k=<span class="hljs-built_in">n</span>，可分离卷积的复杂性也等于自注意层和逐点前馈层的组合，这是我们在模型中采用的方法。<br><br>作为副作用，自我关注可以产生更多可解释的模型。我们从我们的模型中检查注意力分布，并在附录中给出和讨论示例。个体注意力负责人不仅清楚地学会了执行不同的任务，而且许多人似乎表现出与句子的句法和语义结构有关的行为。<br></code></pre></td></tr></table></figure><p></p><p>自注意力层：通过恒定数量的顺序执行操作连接所有位置</p><p><strong>递归层</strong>：需要O（n）个顺序操作</p><p>当序列长度n小于表示维度d时，自注意层比递归层更快</p><p>为了提高涉及非常长序列的任务的计算性能，可以将自注意限制为仅考虑输入序列中以相应输出位置为中心的大小为r的邻域。这将使最大路径长度增加到O（n＝r）。我们计划在未来的工作中进一步研究这种方法。</p><p>核宽度k＜n的单个卷积层并不连接所有输入和输出位置对。在连续核的情况下，这样做需要O（n=k）个卷积层的堆栈，或者在扩张卷积的情况下需要O（logk（n））[18]，从而增加网络中任意两个位置之间最长路径的长度。卷积层通常比递归层贵k倍。然而，可分离卷积[6]将复杂性显著降低到O（k n d+n d2）。然而，即使k=n，可分离卷积的复杂性也等于自注意层和逐点前馈层的组合，这是我们在模型中采用的方法。</p><p>另外，自注意力可以产生更多可解释的模型。</p><p>我们从我们的模型中检查注意力分布，并在附录中给出和讨论示例。单个的注意力头不仅清楚地学会了执行不同的任务，而且许多注意力头似乎表现出与句子的句法和语义结构有关的行为。</p><h2 id="训练"><a href="#训练" class="headerlink" title="训练"></a>训练</h2><p>使用BLEU评价效果。</p></div><hr><div><div class="post-metas my-3"></div><div class="license-box my-3"><div class="license-title"><div>Transformer(Attention机制)论文阅读-2</div><div>http://petertan303.github.io/2023/06/13/Transformer-Attention机制-论文阅读-2/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>peter？</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2023年6月13日</div></div><div class="license-meta-item"><div>许可协议</div><div><a target="_blank" href="https://creativecommons.org/licenses/by/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-by"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/2023/06/13/fpga-%E7%94%B5%E6%A2%AF%E9%A1%B9%E7%9B%AE/" title="fpga 电梯项目"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">fpga 电梯项目</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/2023/06/12/VITS%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/" title="VITS论文阅读"><span class="hidden-mobile">VITS论文阅读</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div><div class="statistics"><span id="leancloud-site-pv-container" style="display:none">总访问量 <span id="leancloud-site-pv"></span> 次 </span><span id="leancloud-site-uv-container" style="display:none">总访客数 <span id="leancloud-site-uv"></span> 人</span></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t,e){var i=Fluid.plugins.typing,n=e.getElementById("subtitle");n&&i&&i(n.getAttribute("data-typed-text"))}(window,document)</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js",(function(){var t=jQuery("#toc");if(0!==t.length&&window.tocbot){var i=jQuery("#board-ctn").offset().top;window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-i},CONFIG.toc)),t.find(".toc-list-item").length>0&&t.css("visibility","visible"),Fluid.events.registerRefreshCallback((function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;t.find(".toc-list-item").length>0&&t.css("visibility","visible")}}))}}))</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback((function(){if("anchors"in window){anchors.removeAll();var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}}))}))</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script>Fluid.plugins.imageCaption()</script><script defer src="/js/leancloud.js"></script><script src="/js/local-search.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>